generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Member {
  id     Int     @id @default(autoincrement())
  name   String  @unique
  scores Score[]
}

// 경기장(코스)별 홀 파. 스코어 입력 시 선택·검색하며, 새 코스는 인코스/아웃코스 파 입력 후 저장
model Course {
  id   Int    @id @default(autoincrement())
  name String @unique // 코스 이름 (예: 남서울CC, 파인힐스)
  // 1~18홀 파 (전반 par1~par9, 후반 par10~par18)
  par1  Int @default(4)
  par2  Int @default(4)
  par3  Int @default(4)
  par4  Int @default(4)
  par5  Int @default(4)
  par6  Int @default(4)
  par7  Int @default(4)
  par8  Int @default(4)
  par9  Int @default(4)
  par10 Int @default(4)
  par11 Int @default(4)
  par12 Int @default(4)
  par13 Int @default(4)
  par14 Int @default(4)
  par15 Int @default(4)
  par16 Int @default(4)
  par17 Int @default(4)
  par18 Int @default(4)
}

model Round {
  id                 Int      @id @default(autoincrement())
  date               DateTime @default(now())
  course             String   // 코스 이름 (Course.name과 매칭)
  note               String?
  scorecardImagePath String?  // 스코어카드 사진 상대 경로 (예: scorecards/2025/02/11/xxx.jpg)
  scores             Score[]
}

model Score {
  id       Int    @id @default(autoincrement())
  strokes  Int

  // 1~18홀 스코어를 개별 필드로 저장 (SQLite 에서는 Json 타입 미지원)
  h1       Int
  h2       Int
  h3       Int
  h4       Int
  h5       Int
  h6       Int
  h7       Int
  h8       Int
  h9       Int
  h10      Int
  h11      Int
  h12      Int
  h13      Int
  h14      Int
  h15      Int
  h16      Int
  h17      Int
  h18      Int

  member   Member @relation(fields: [memberId], references: [id])
  memberId Int

  round    Round  @relation(fields: [roundId], references: [id])
  roundId  Int
}

// 갤러리 사진: 제목·설명·태그 + 파일 경로(상대). 태그는 쉼표 구분(예: "2025,남서울CC")
model GalleryItem {
  id          Int      @id @default(autoincrement())
  title       String
  description String?
  tags        String   @default("") // 쉼표 구분 태그. 앨범/필터용
  filePath    String   // 저장 경로 상대값 (예: 2025/02/11/abc.jpg) → URL은 uploadConfig 기준
  createdAt   DateTime @default(now())
}

